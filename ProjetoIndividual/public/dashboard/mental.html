<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="dash.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="icon" href="../imagens/icon.png">
</head>

<body>
    <div class="main-quiz" id="mainquiz">
        <div class="shader-quiz" id="shadinho">
        <div class="quiz-card" id="quizCard">
            <div class="beningng">
                <h1>Memorização</h1>
            </div>
            <div id="quiz-container" class="question-container"></div>
            <div class="prox">
            <button id="btnProximo" onclick="showNextQuestion()" style="display:none;">Próxima Pergunta</button>
        </div>
            <div id="pontos"></div>
        </div>
    </div>
</div>
    <div class="main">
        <div class="comecinho">
            <div class="so-pra-ter">
                <i class='bx bx-dots-horizontal-rounded'></i>
            </div>
        </div>

        <div class="content-musi">
            <div class="both">
                <div class="side-cont">
                    <div class="opts">
                        <li><a href="dash.html"><i class='bx bxs-home'></i>Inicio</a></li>
                        <li><a href="bibliotecaM.html"><i class='bx bx-library'></i>Bibioteca Musical</a></li>
                        <li><i class='bx bxs-brain'></i>Área Mental</li>
                    </div>

                    <div class="biblioteca">
                        <div class="introd">
                            <div class="p1">
                                <i class='bx bxs-playlist'></i>
                                <h3>Suas Playlists</h3>
                            </div>
                            <div class="p2" id="add-playlist-btn">
                                <a href="bibliotecaM.html"><i class='bx bx-plus'></i></a>
                            </div>
                        </div>
                        <div class="onde-play" id="playlist-container">
                           
                        </div>
                    </div>
                </div>

                <div class="real-cont">
                    <div class="header">
                        <div class="ida-volta">
                            <div class="cicli">
                                <a href="bibliotecaM.html"><i class='bx bx-chevron-left'></i></a>
                            </div>
                            <div class="cicli">
                                <i class='bx bx-chevron-right'></i>
                            </div>
                        </div>
                        <div class="perf">
                            <i class='bx bxs-user-circle'></i>
                        </div>
                    </div>

                    <div class="main-board" id="main-board">
                        <div class="maindomain">
                            <div class="quiz-card-display">
                                <h2>Memorização</h2>
                                <i class='bx bx-brain'></i>
                                <i class='bx bx-play-circle cir' onclick="startQuiz()"></i>
                            </div>
                            <div class="quiz-card-display">
                                <h2>Fala</h2>
                                <i class='bx bxs-user-voice'></i>
                                <i class='bx bx-play-circle cir'></i>
                            </div>
                            <div class="quiz-card-display">
                                <h2>Pain Gone</h2>
                                <i class='bx bx-band-aid'></i>
                                <i class='bx bx-play-circle cir'></i>
                            </div>
                            <div class="quiz-card-display">
                                <h2>Emocional</h2>
                                <i class='bx bxs-heart'></i>
                                <i class='bx bx-play-circle cir'></i>
                            </div>
                        </div>
                    </div>

                    <div id="espc-playlist">
                        <div class="teto">
                            <div class="contento-teto">
                                <img id="playlist-image">
                                <div class="teto-desc">
                                    <span id="playlist-criador"></span>
                                    <h1 id="playlist-title"></h1>
                                    <p id="licença"></p>
                                </div>
                            </div>
                        </div>
                        <div class="display-play" id="display-play">
                            <audio id="audio" src=""></audio>
                        </div>
                    </div>
                </div>
            </div>

            <div class="play-cont">
                <div class="musi-esp">
                    <div class="miniatura">
                        <img src="https://t4.ftcdn.net/jpg/06/29/94/97/360_F_629949736_LZTYQWh9XsKztcCJhXvuc0EQK3hDwp54.jpg" alt="">
                    </div>
                    <div class="des-musi">
                        <div class="tt">
                            <span>SuperWave</span>
                        </div>
                        <div class="autor">
                            <span>Playlist por: <u>Equipe Musipy</u></span>
                        </div>
                    </div>
                </div>

                <div class="main-play">
                    <div class="repo-func">
                        <i class='bx bx-shuffle'></i>
                        <i class='bx bx-skip-previous'></i>
                        <div class="circle" id="PouP">
                            <i class='bx bx-play playin' id="playPauseIcon"></i>
                        </div>
                        <i class='bx bx-skip-next'></i>
                        <i class='bx bx-sync' id="stopBtn"></i>
                    </div>
                    <div class="cono-bar">  
                        <span id="currentTime">0:00</span>
                        <input type="range" id="seekBar" min="0" max="100">
                        <span id="duration">0:00</span>
                    </div>
                </div>


                <div class="musi-esp">
                    <div class="log-out">
                        <a href="../login.html"><i class='bx bx-log-out'></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="main.js"></script>

<script>
    var questoes = [
        "Qual das seguintes estratégias é mais eficaz para melhorar a memória na musicoterapia?",
        "Que tipo de método é útil para organizar informações musicais para facilitar a memorização na musicoterapia?",
        "Que tipo de atividade musical é benéfica para manter uma memória saudável na musicoterapia?",
        "Qual dos seguintes fatores pode prejudicar a memória na musicoterapia?"
    ];

    var opcs = [
        ["a) Repetição espaçada de melodias e ritmos", "b) Improvisação rápida durante a prática musical", "c) Tentar tocar várias músicas ao mesmo tempo", "d) Ignorar a prática regular de revisão de peças musicais"],
        ["a) Apenas confiar na capacidade de lembrar notas de curto prazo", "b) Criar mnemônicos musicais, como acrônimos de acordes ou ritmos", "c) Pular partes de uma música consideradas irrelevantes", "d) Não revisar regularmente partituras ou técnicas musicais"],
        ["a) Evitar desafios musicais complexos", "b) Ficar em casa sem praticar nenhum instrumento", "c) Aprender novas peças musicais regularmente", "d) Não se envolver em atividades musicais que estimulem o cérebro"],
        ["a) Ter uma boa qualidade de sono", "b) Praticar regularmente exercícios físicos relacionados à música", "c) Lidar com estresse crônico durante as sessões musicais", "d) Consumir moderadamente água durante as práticas musicais"]
    ];

    var respostaC = ["a) Repetição espaçada de melodias e ritmos", "b) Criar mnemônicos musicais, como acrônimos de acordes ou ritmos", "c) Aprender novas peças musicais regularmente", "c) Lidar com estresse crônico durante as sessões musicais"];

    var aQuestao = 0;
    var pontos = 0;
    var respostaSelecionada = false;

    function startQuiz() {
        var quizCard = document.getElementById('quizCard');
        var btnProximo = document.getElementById('btnProximo');
        mainquiz.style.display = 'flex';
        shadinho.style.display = 'flex';
        quizCard.style.display = 'flex';
        btnProximo.style.display = 'inline';
        aQuestao = 0;
        pontos = 0;
        respostaSelecionada = false;
        showQuestion(aQuestao);
    }

    function showQuestion(index) {
        var quizContainer = document.getElementById('quiz-container');
        if (index < questoes.length) {
            respostaSelecionada = false;
            var questionHtml = `<div class="questioneC"><p>${questoes[index]}</p></div>
                                <div class="questione">`;

            for (var cont = 0; cont < opcs[index].length; cont++) {
                questionHtml += `<div class="optione" onclick="selectOption(this, '${opcs[index][cont]}')">${opcs[index][cont]}</div>`;
            }
            questionHtml += `</div>`;
            quizContainer.innerHTML = questionHtml;
        } else {
            quizContainer.innerHTML = `<div class="acertou">Você acertou ${pontos} de ${questoes.length} perguntas.</div>
            <img src="imgs/win.png" class="win">
            <button class="fini" onclick="finalizarEnviarBanco()">Finalizar Quiz</button>`;
            document.getElementById('btnProximo').style.display = 'none';
        }
    }

    function selectOption(option, selectedOption) {
        var options = document.querySelectorAll('.optione');
        for (var cont2 = 0; cont2 < options.length; cont2++) {
            options[cont2].classList.remove('selected');
        }
        option.classList.add('selected');

        if (!respostaSelecionada && selectedOption === respostaC[aQuestao]) {
            pontos++;
            respostaSelecionada = true;
        }
    }

    function showNextQuestion() {
        var selectedOption = document.querySelector('.optione.selected');
        if (selectedOption) {
            aQuestao++;
            showQuestion(aQuestao);
        } else {
            alert("Por favor, selecione uma opção.");
        }
    }

    function finalizarEnviarBanco() {
    var quizCard = document.getElementById('quizCard');
    quizCard.style.display = 'none';
    mainquiz.style.display = 'none';
    shadinho.style.display = 'none';
    const erros = questoes.length - pontos;

    const resultadosQuiz = {
        acertos: pontos,
        totalQuestoes: erros
    };

    fetch("/playlist/enviarResultadosQuizParaBanco", {
        method: 'POST',
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify(resultadosQuiz)
    })
    .then(response => response.json())
    .then(data => {
        console.log('Resultados do quiz enviados com sucesso:', data);
    })
    .catch(error => {
        console.error('Erro ao enviar os resultados do quiz:', error);
    });
}

</script>

</html>
